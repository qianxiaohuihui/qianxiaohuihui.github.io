CREATE VIEW [dbo].[V_TABLE_INFO] AS
SELECT
	 ROW_NUMBER() OVER(ORDER BY D.NAME,A.COLORDER ASC) AS TMP_ROWID,
	 TABLENAME = D.NAME,
	 表说明     = CASE WHEN A.COLORDER=1 THEN ISNULL(F.VALUE,'') ELSE '' END,
	 字段序号   = A.COLORDER,
	 字段名     = A.NAME,
	 字段说明   = ISNULL(G.[VALUE],''),
	 类型       = B.NAME,
	 长度       = COLUMNPROPERTY(A.ID,A.NAME,'PRECISION'),
	 主键       = CASE WHEN EXISTS(SELECT 1 FROM SYSOBJECTS WHERE XTYPE='PK' AND PARENT_OBJ=A.ID AND NAME IN (
					  SELECT NAME FROM SYSINDEXES WHERE INDID IN( SELECT INDID FROM SYSINDEXKEYS WHERE ID = A.ID AND COLID=A.COLID))) THEN '√' ELSE '' END,
	 允许空     = CASE WHEN A.ISNULLABLE=1 THEN '√'ELSE '' END,
	 默认值     = ISNULL(E.TEXT,'')
 FROM SYSCOLUMNS A
 LEFT JOIN SYSTYPES B ON A.XUSERTYPE=B.XUSERTYPE
 INNER JOIN SYSOBJECTS D ON A.ID=D.ID  AND D.XTYPE='U' AND  D.NAME<>'DTPROPERTIES'
 LEFT JOIN SYSCOMMENTS E ON A.CDEFAULT=E.ID
 LEFT JOIN SYS.EXTENDED_PROPERTIES  G ON A.ID=G.MAJOR_ID AND A.COLID=G.MINOR_ID
 LEFT JOIN SYS.EXTENDED_PROPERTIES F ON D.ID=F.MAJOR_ID AND F.MINOR_ID=0
 WHERE D.NAME != 'SYSDIAGRAMS'
